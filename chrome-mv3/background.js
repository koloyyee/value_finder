var background=function(){"use strict";var s,i;function a(e){return e==null||typeof e=="function"?{main:e}:e}const c={screeners:"screeners",bookmarks:"bookmarks",notes:"notes",mockScreeners:"mock_screeners",mockBookmarks:"mock_bookmarks",mockNotes:"mock_notes"},l=a(()=>{u(),(async()=>d())(),chrome.runtime.onInstalled.addListener(()=>{h()})});async function d(){const[e]=await chrome.tabs.query({active:!0});e&&chrome.runtime.onMessage.addListener(n=>{console.log(n),n.action==="open_side_panel"&&chrome.sidePanel.open({windowId:e.windowId})})}function u(){chrome.runtime.onConnect.addListener(e=>{e.onMessage.addListener(n=>{n.ticker&&chrome.runtime.onConnect.addListener(o=>{o.name==="comp"&&o.postMessage({ticker:String(n.ticker),secReport:`https://www.sec.gov/edgar/search/#/category=custom&entityName=${n.ticker}&forms=10-K%252C10-Q%252C20-F%252C40-F`,from:"ticker port - background",companyUrl:n.companyUrl,insider:`https://www.sec.gov/edgar/search/#/category=custom&entityName=${n.ticker}&forms=144`})})})}),(async()=>m())()}async function m(){const e=await chrome.storage.local.get(c.screeners);Object.keys(e).length===0?await chrome.storage.local.set({[c.screeners]:{}}):console.log({coll:e})}async function h(){chrome.contextMenus.create({id:"openSidePanel",title:"Open side panel",contexts:["all"]}),chrome.contextMenus.onClicked.addListener((n,o)=>{!o||!o.id||n.menuItemId==="openSidePanel"&&chrome.sidePanel.open({tabId:o.id,windowId:o.windowId})}),chrome.runtime.connect({name:"textHighlight"}).onMessage.addListener(n=>{console.log("received from background in content.ts"),console.log(n)})}function k(){}((i=(s=globalThis.browser)==null?void 0:s.runtime)==null?void 0:i.id)==null?globalThis.chrome:globalThis.browser;function r(e,...n){}const g={debug:(...e)=>r(console.debug,...e),log:(...e)=>r(console.log,...e),warn:(...e)=>r(console.warn,...e),error:(...e)=>r(console.error,...e)};let t;try{t=l.main(),t instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(e){throw g.error("The background crashed on startup!"),e}return t}();
background;
