import{r as a,R as y,N as P,I as $,j as t,c as H}from"./storage-CBIG4jaI.js";function q(){return q=Object.assign||function(s){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(s[l]=r[l])}return s},q.apply(this,arguments)}var L=function(n,r){var l={left:{top:0,left:0,transform:"translate3d(-100%, 0, 0)",width:r,height:"100vh"},right:{top:0,right:0,transform:"translate3d(100%, 0, 0)",width:r,height:"100vh"},bottom:{left:0,right:0,bottom:0,transform:"translate3d(0, 100%, 0)",width:"100%",height:r},top:{left:0,right:0,top:0,transform:"translate3d(0, -100%, 0)",width:"100%",height:r}};return l[n]},U=function(n){var r=n.open,l=n.onClose,h=l===void 0?function(){}:l,b=n.children,m=n.style,p=n.enableOverlay,S=p===void 0?!0:p,j=n.overlayColor,g=j===void 0?"#000":j,N=n.overlayOpacity,x=N===void 0?.4:N,w=n.zIndex,v=w===void 0?100:w,c=n.duration,T=c===void 0?500:c,d=n.direction,k=n.size,_=k===void 0?250:k,I=n.className,C=n.customIdSuffix,E=n.lockBackgroundScroll,u=E===void 0?!1:E,D=n.overlayClassName,O=D===void 0?"":D,f=a.useRef(null);a.useEffect(function(){var Z=function(){f.current=window.document.querySelector("body"),f.current&&u&&(f.current.style.overflow=r?"hidden":"")};Z()},[r]);var e=a.useMemo(function(){return C||(Math.random()+1).toString(36).substring(7)},[C]),i={backgroundColor:g.toString(),opacity:x,zIndex:v},o=q({zIndex:v+1,transitionDuration:T+"ms"},L(d,_),m);return y.createElement("div",{id:"EZDrawer"+e,className:"EZDrawer"},y.createElement("input",{type:"checkbox",id:"EZDrawer__checkbox"+e,className:"EZDrawer__checkbox",onChange:h,checked:r}),y.createElement("nav",{role:"navigation",id:"EZDrawer__container"+e,style:o,className:"EZDrawer__container "+I},b),S&&y.createElement("label",{htmlFor:"EZDrawer__checkbox"+e,id:"EZDrawer__overlay"+e,className:"EZDrawer__overlay "+O,style:i}))};function V(){const s=new P(chrome.storage.local),[n,r]=a.useState($.create),[l,h]=a.useState(""),[b,m]=a.useState(""),[p,S]=a.useState(""),[j,g]=a.useState(""),[N,x]=a.useState(""),[w,v]=a.useState(""),[c,T]=a.useState([]);a.useEffect(()=>{function e(){chrome.runtime.onConnect.addListener(i=>{i.name==="textHighlight"&&i.onMessage.addListener(o=>{console.log(o),m(o.text),h(o.url),x(o.id)})}),d(),console.log(c)}e()},[]);async function d(){const e=await s.get();T(e)}function k(e){const i=e.currentTarget.value;g(i)}function _(){h(""),g(""),m(""),x(""),S(""),v(""),r($.create)}async function I(e){e.preventDefault();const i=e.currentTarget,o=new FormData(i),Z=String(o.get("highlightedText")),F=String(o.get("title")),R=String(o.get("note")),B=o.get("ticker")!==null?String(o.get("ticker")):"",M={id:String(o.get("id"))===""?String(Date.now()):String(o.get("id")),title:F,source:l,ticker:B,quote:Z,note:R},{err:z}=await s.save(F,M);z&&console.error(z),i.reset(),_(),d()}const[C,E]=a.useState(!1),u=()=>{E(e=>!e)};function D(e){h(e.source),m(e.quote),g(e.note),x(e.id),S(e.ticker),v(e.title),u(),d(),r($.update)}function O(e){s.del(e),d()}function f(e){window.prompt()}return t.jsxs("main",{className:"border-2 border-emerald-600 min-h-[90vh] m-1 rounded",children:[t.jsxs("form",{onSubmit:e=>I(e),className:"m-3 flex flex-col gap-3",children:[t.jsx("input",{type:"hidden",name:"intent",value:n}),t.jsx("input",{type:"hidden",name:"id",value:N}),t.jsx("label",{htmlFor:"title",children:"Note Title:"}),t.jsx("input",{name:"title",type:"text",className:"rounded",defaultValue:w,required:!0}),t.jsxs("label",{htmlFor:"ticker",children:["Ticker: ",t.jsx("small",{children:"(optional)"})]}),t.jsx("input",{name:"ticker",type:"text",className:"rounded",defaultValue:p}),t.jsxs("label",{htmlFor:"highlightedText",children:["Quote: ",t.jsx("small",{children:"(highlighted text on the page)"})]}),t.jsx("input",{type:"hidden","aria-label":"highlighted quotes",value:b,name:"highlightedText",id:"highlightedText"}),t.jsx("blockquote",{className:"min-h-32 border-2 border-emerald-600 rounded max-h-60 overflow-y-auto",children:b}),l!==""?t.jsxs("small",{className:"truncate",children:["source: ",l]}):t.jsx(t.Fragment,{}),t.jsx("label",{htmlFor:"note",children:"Notes:"}),t.jsx("textarea",{className:"min-h-32 rounded",required:!0,id:"note","aria-label":"user's note",name:"note",value:j,onChange:e=>k(e)}),t.jsxs("div",{className:"self-center",children:[t.jsx("button",{children:"save"}),t.jsx("button",{type:"reset",onClick:()=>_(),children:"clear"})]})]}),t.jsx("button",{type:"button",onClick:u,children:"Show"}),t.jsxs(U,{open:C,onClose:u,direction:"bottom",className:"bla bla bla",size:"95vh",children:[t.jsx("button",{type:"button",onClick:u,children:"x"}),c!==void 0&&c.length>0?c.map(e=>t.jsxs("form",{className:"rounded border-2 border-emerald-600 m-2 p-2",children:[t.jsxs("p",{children:["title: ",e.title," "]}),e.ticker!==null?t.jsxs("p",{children:[" ticker: ",e.ticker," "]}):t.jsx(t.Fragment,{}),t.jsxs("p",{className:"truncate",children:["note: ",e.note," "]}),t.jsx("button",{type:"button",onClick:()=>D(e),children:"🔎"}),t.jsx("button",{type:"button",onClick:()=>O(e),children:"🗑️"}),t.jsx("button",{type:"button",onClick:()=>f(),children:"📑"})]})):t.jsx(t.Fragment,{children:" No notes yet! :( "})]})]})}H.createRoot(document.getElementById("root")).render(t.jsx(y.StrictMode,{children:t.jsx(V,{})}));
