import{S as E,r as s,j as e,B as M,a as T,C as q,c as B,R as I}from"./storage-CBIG4jaI.js";function R(m){const u=/t=([a-zA-Z-]+)&/.exec(m);return u?u[1].split("-")[0]:u?u[1]:null}const _=()=>{const m=new E(chrome.storage.local),[p,u]=s.useState({}),[x,f]=s.useState(""),[j,b]=s.useState(""),[k,g]=s.useState(""),[t,a]=s.useState(""),[o,c]=s.useState(!1),[h,n]=s.useState("");s.useEffect(()=>{(async()=>{const[r]=await chrome.tabs.query({active:!0,currentWindow:!0});r.url.includes("quote.ashx")?(f(R(r.url)??""),chrome.runtime.connect({name:"comp"}).onMessage.addListener(l=>{a(l.secReport),b(l.companyUrl),n(l.insider)})):(a(""),f(""))})()},[t]),s.useEffect(()=>{(async()=>{var l;const[d]=await chrome.tabs.query({active:!0});(l=d.url)!=null&&l.includes("https://finviz.com/screener.ashx")&&c(!0),i()})()},[]);const i=async()=>{const r=await m.get();u(r)},S=async r=>{r.preventDefault();const d=r.currentTarget,l=new FormData(d),[y]=await chrome.tabs.query({active:!0}),D=String(l.get("screener")),{err:N}=await m.save(D,y.url);N!==null&&v(N),d.reset(),i()},v=r=>{g(r),setTimeout(()=>{g("")},1e3)},w=async(r,d)=>{r.preventDefault(),await m.del(d),i()},F=async r=>{r.preventDefault();const d=r.currentTarget,l=new FormData(d),y=String(l.get("ticker"));await chrome.tabs.update({url:`https://finviz.com/quote.ashx?t=${y}`}),window.close()};return e.jsxs("div",{children:[e.jsxs("p",{id:"errorMsg",className:" text-pink-500","aria-label":"error-message",children:[" ",k," "]}),e.jsxs("section",{className:"p-4 m-3 border-2 border-emerald-600 rounded",children:[e.jsxs("form",{id:"favoritesForm",onSubmit:S,className:`${o?"flex justify-evenly items-center":"hidden"}`,children:[e.jsx("input",{type:"text",name:"screener",id:"screener",placeholder:"Input New Screener",className:"py-2 rounded",required:!0}),e.jsx("button",{type:"submit",children:"Save"})]}),e.jsx("h3",{className:"text-lg font-bold",children:"Screeners "}),e.jsx("div",{className:"mt-4 h-32 overflow-y-auto",children:Object.keys(p).length>0?e.jsx(e.Fragment,{children:e.jsx("ul",{className:"w-full grid grid-cols-2 grid-rows-5 justify-between items-center",children:Object.entries(p).map(([r,d])=>e.jsx("li",{id:`item-${r}`,className:"flex gap-3 items-center",children:e.jsx("form",{className:"",id:`removeItem-${r}`,onSubmit:l=>w(l,r),children:e.jsxs("div",{className:"",children:[e.jsx("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"",children:r}),e.jsx("button",{type:"submit",className:"hover:border-red-400",children:"🗑️"})]})})},r))})}):e.jsxs("div",{children:[e.jsx("p",{children:"The watchlist is empty :("}),e.jsx("a",{href:M,target:"_blank",rel:"noopener noreferrer",children:"Go to Finviz Screener"})]})})]}),e.jsxs("section",{className:"m-3 p-2 border-2 border-emerald-600 rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-md font-bold",children:"Comp. Fundamentals"}),e.jsxs("form",{id:"tickerForm",onSubmit:F,className:"flex gap-3",children:[e.jsx("input",{type:"text",name:"ticker",placeholder:"Enter Ticker",className:" rounded",required:!0}),e.jsx("button",{type:"submit",children:"Search by Ticker"})]})]}),x&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-2"}),e.jsxs("div",{className:"p-1 m-3 border-b-2 border-emerald-600 rounded",children:[e.jsxs("span",{className:"font-semi text-[1.0rem]",children:[x,": "]}),e.jsx("a",{href:t,target:"_blank",children:"  Quarter & Annual (10Q&10K) "}),e.jsx("span",{className:"text-pink-700",children:"|"}),e.jsx("a",{href:h,target:"_blank",children:" Insider(144) "}),e.jsx("span",{className:"text-pink-700",children:"|"}),e.jsx("a",{href:j,target:"_blank",children:" Homepage / IR"})]})]})]})]})},z=()=>{const m=new T(chrome.storage.local),[p,u]=s.useState(new Map),[x,f]=s.useState("");s.useEffect(()=>{j()},[]);async function j(){const t=await m.get(),a=new Map;t&&Object.entries(t).forEach(([o,c])=>{a.set(o,c)}),u(a)}async function b(t){t.preventDefault();const a=t.currentTarget,o=new FormData(a),c=o.get("ticker"),h=o.get("bookmarkName"),[n]=await chrome.tabs.query({active:!0});if(n.url){const{err:i}=await m.save(String(c),{[String(h)]:n.url});i===null?a.reset():f(i)}j()}async function k(t){t.preventDefault();const a=t.currentTarget,o=new FormData(a),c=String(o.get("url")),h=String(o.get("ticker")),n=String(o.get("bookmarkName"));if(!c&&!h&&!n)return;const{err:i}=await m.del(h,n,c);if(i!==null){f(i);return}j()}function g(){console.log("sending action"),chrome.runtime.sendMessage({action:"open_side_panel"}),window.close()}return e.jsxs("div",{className:"m-2 p-3 border-2 border-emerald-600 rounded ",children:[e.jsx("p",{className:"text-red-500",children:x}),e.jsxs("form",{onSubmit:b,className:"flex gap-3",children:[e.jsx("input",{name:"ticker",placeholder:"Ticker",className:"py-2 rounded w-1/5",required:!0}),e.jsx("input",{name:"bookmarkName",placeholder:"Bookmark name e.g.: 2023-10q",className:"py-2 rounded",required:!0}),e.jsx("button",{type:"submit",children:" bookmark "}),e.jsx("button",{type:"button",onClick:()=>g(),children:" Open Note "})]}),p.size>0?e.jsx("ul",{className:"h-36 overflow-y-auto grid grid-cols-2",children:Array.from(p.entries()).map(([t,a],o)=>e.jsxs("li",{children:[e.jsx("h4",{className:"font-bold",children:t}),e.jsx("ul",{children:a.map((c,h)=>e.jsx("li",{children:Object.keys(c).map((n,i)=>e.jsxs("form",{onSubmit:S=>k(S),children:[e.jsxs("a",{href:c[n],target:"_blank",children:[" ",n," "]},i),e.jsx("input",{name:"url",type:"hidden",value:c[n]}),e.jsx("input",{name:"ticker",type:"hidden",value:t}),e.jsx("input",{name:"bookmarkName",type:"hidden",value:n}),e.jsx("button",{children:" ❌"})]},n+i))},h))})]},t+o))}):e.jsx(e.Fragment,{children:e.jsx("p",{children:" No Bookmarks yet :( "})})]})},P=()=>(s.useState(q.screeners),s.useState(""),s.useState(-1),e.jsxs("div",{className:"border-2 border-emerald-500 rounded h-max",children:[e.jsx(_,{}),e.jsx("hr",{}),e.jsx(z,{})]}));B.createRoot(document.getElementById("root")).render(e.jsx(I.StrictMode,{children:e.jsx(P,{})}));
