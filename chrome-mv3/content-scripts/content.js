var content=function(){"use strict";var F=Object.defineProperty;var M=(c,o,a)=>o in c?F(c,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[o]=a;var l=(c,o,a)=>M(c,typeof o!="symbol"?o+"":o,a);var w,S;function c(e){return e}function o(e){const t=/t=([a-zA-Z-]+)&/.exec(e);return t?t[1].split("-")[0]:t?t[1]:null}const a={matches:["<all_urls>"],main(){const e=window.location.href;e.includes("quote.ashx")&&v(e),document.onmouseup=I,document.oncontextmenu=N}};function v(e){var i,s;const n=(s=(i=document.querySelector(".quote-header_ticker-wrapper_company"))==null?void 0:i.querySelector("a"))==null?void 0:s.getAttribute("href"),t=chrome.runtime.connect({name:"comp"}),r=o(e);r&&n?t.postMessage({ticker:r,from:"start from content passingTicker",companyUrl:n}):console.error("url not matched.")}function N(){const e=window.getSelection();if(e&&e.rangeCount>0){let t=e.getRangeAt(0).commonAncestorContainer;if(t.nodeType===Node.TEXT_NODE&&(t=t.parentNode),t.nodeType===Node.ELEMENT_NODE&&t.classList.contains("highlight")){const r=t.parentNode;for(;t.firstChild;)r.insertBefore(t.firstChild,t);r.removeChild(t),chrome.runtime.connect({name:"mouse-action"}),chrome.runtime.connect({name:"textHighlight"}).postMessage({text:"",from:"content",url:""})}}}function I(){var n;const e=window.getSelection();if(e&&e.rangeCount>0){const t=String(Date.now());let r=(n=document.getSelection())==null?void 0:n.toString();(r==null?void 0:r.trim())!==""&&chrome.runtime.connect({name:"textHighlight"}).postMessage({text:r,from:"content",url:window.location.href,id:t})}}const u=((S=(w=globalThis.browser)==null?void 0:w.runtime)==null?void 0:S.id)==null?globalThis.chrome:globalThis.browser;function h(e,...n){}const b={debug:(...e)=>h(console.debug,...e),log:(...e)=>h(console.log,...e),warn:(...e)=>h(console.warn,...e),error:(...e)=>h(console.error,...e)},A={BASE_URL:"/",BROWSER:"chrome",CHROME:!0,COMMAND:"build",DEV:!1,EDGE:!1,ENTRYPOINT:"content",FIREFOX:!1,MANIFEST_VERSION:3,MODE:"production",OPERA:!1,PROD:!0,SAFARI:!1,SSR:!1,VITE_CJS_IGNORE_WARNING:"true"},f=class f extends Event{constructor(n,t){super(f.EVENT_NAME,{}),this.newUrl=n,this.oldUrl=t}};l(f,"EVENT_NAME",p("wxt:locationchange"));let g=f;function p(e){var t;const n=typeof A>"u"?"build":"content";return`${(t=u==null?void 0:u.runtime)==null?void 0:t.id}:${n}:${e}`}function _(e){let n,t;return{run(){n==null&&(t=new URL(location.href),n=e.setInterval(()=>{let r=new URL(location.href);r.href!==t.href&&(window.dispatchEvent(new g(r,t)),t=r)},1e3))}}}const d=class d{constructor(n,t){l(this,"isTopFrame",window.self===window.top);l(this,"abortController");l(this,"locationWatcher",_(this));this.contentScriptName=n,this.options=t,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(n){return this.abortController.abort(n)}get isInvalid(){return u.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(n){return this.signal.addEventListener("abort",n),()=>this.signal.removeEventListener("abort",n)}block(){return new Promise(()=>{})}setInterval(n,t){const r=setInterval(()=>{this.isValid&&n()},t);return this.onInvalidated(()=>clearInterval(r)),r}setTimeout(n,t){const r=setTimeout(()=>{this.isValid&&n()},t);return this.onInvalidated(()=>clearTimeout(r)),r}requestAnimationFrame(n){const t=requestAnimationFrame((...r)=>{this.isValid&&n(...r)});return this.onInvalidated(()=>cancelAnimationFrame(t)),t}requestIdleCallback(n,t){const r=requestIdleCallback((...i)=>{this.signal.aborted||n(...i)},t);return this.onInvalidated(()=>cancelIdleCallback(r)),r}addEventListener(n,t,r,i){var s;t==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(s=n.addEventListener)==null||s.call(n,t.startsWith("wxt:")?p(t):t,r,{...i,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),b.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:d.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName},"*")}listenForNewerScripts(n){let t=!0;const r=i=>{var s,T;if(((s=i.data)==null?void 0:s.type)===d.SCRIPT_STARTED_MESSAGE_TYPE&&((T=i.data)==null?void 0:T.contentScriptName)===this.contentScriptName){const C=t;if(t=!1,C&&(n!=null&&n.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",r),this.onInvalidated(()=>removeEventListener("message",r))}};l(d,"SCRIPT_STARTED_MESSAGE_TYPE",p("wxt:content-script-started"));let E=d;function O(){}function m(e,...n){}const R={debug:(...e)=>m(console.debug,...e),log:(...e)=>m(console.log,...e),warn:(...e)=>m(console.warn,...e),error:(...e)=>m(console.error,...e)};return(async()=>{try{const{main:e,...n}=a,t=new E("content",n);return await e(t)}catch(e){throw R.error('The content script "content" crashed on startup!',e),e}})()}();
content;
